\ProvidesPackage{beamerthemeagwagnerpresentation}

\mode<presentation>

\beamer@compressfalse

\newif\ifbeamer@style
\DeclareOptionBeamer{light}{\beamer@styletrue}
\DeclareOptionBeamer{dark}{\beamer@stylefalse}
\ProcessOptionsBeamer

\usepackage{varwidth}
\usepackage{etoolbox}
\usepackage[outline]{contour}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{amsthm}
\usepackage{latexsym}
\usepackage[english]{babel}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{listings}
\usepackage{tikz}
\usepackage{multicol}
\usepackage{ragged2e}
\usepackage{calc}
\usepackage{mathpazo}			%% --- Palantino
\usepackage[scaled=.90]{helvet}		%% --- Helvetica (Arial)
\usepackage{courier}			%% --- Courier

\setbeamersize{text margin left=1em,text margin right=1em}

\selectcolormodel{rgb}
\definecolor{almostblack}	{rgb}		{0.075,0.075,0.075}
\definecolor{anthracite}	{rgb}		{0.100,0.100,0.100}
\definecolor{darkgrey}		{rgb}		{0.196,0.196,0.196}
\definecolor{darkblue}		{rgb}		{0.063,0.259,0.478}
\definecolor{darkorange}	{rgb}		{0.855,0.475,0.102}
\definecolor{darkgreen}		{rgb}		{0.584,0.726,0.106}
\definecolor{lightblue}		{rgb}		{0.471,0.702,0.941}
\setbeamertemplate{itemize items}[circle]
\setbeamerfont{frametitle}			{size=\large,series=\bf}
\setbeamerfont{text in foot/headline}		{size=\tiny,series=\normalfont}
\setbeamerfont{title}				{size=\Large,series=\bf}
\setbeamerfont{author}				{size=\large,series=\normalfont}
\setbeamerfont{institute}			{size=\small,series=\normalfont}
\setbeamerfont{date}				{size=\normalsize,series=\normalfont}
\setbeamerfont{normal text}			{size=\normalsize,series=\normalfont}
\setbeamerfont{section in head/foot}		{size=\tiny,series=\normalfont}
\ifbeamer@style
	\useitemizeitemtemplate{\color{beamerstructure}$\blacktriangleright$}
	\setbeamercolor{background canvas}	{bg=white}
	\setbeamercolor{frametitle}		{fg=anthracite}
	\setbeamercolor{normal text}		{fg=anthracite}
	\setbeamercolor{title}			{fg=anthracite}	%white
	\setbeamercolor{author}			{fg=darkblue}
	\setbeamercolor{institute}		{fg=darkblue}
	\setbeamercolor{date}			{fg=darkblue}
	\setbeamercolor{itemize item}		{fg=anthracite}
	\setbeamercolor{itemize subitem}	{fg=anthracite}
	\setbeamercolor{structure}		{fg=anthracite}
	\setbeamercolor{line}			{bg=darkblue}
	\setbeamercolor{section in head/foot}	{bg=lightblue,fg=anthracite}	%bg=white
	\setbeamercolor{separation line}	{bg=darkblue}
	\definecolor{titlecontourtop}		{rgb}	{0.471,0.702,0.941}
	\definecolor{titlecontourbottom}	{rgb}	{1.000,1.000,1.000}
\else
	\useitemizeitemtemplate{\color{beamerstructure}\textcontour{black}{$\blacktriangleright$}}
	\usebackgroundtemplate{\includegraphics[width=\paperwidth,height=\paperheight]{blackboard.jpg}}
	%\setbeamercolor{background canvas}	{bg=anthracite}
	\setbeamercolor{frametitle}		{fg=white}
	\setbeamercolor{normal text}		{fg=white}
	\setbeamercolor{title}			{fg=white}
	\setbeamercolor{author}			{fg=white}
	\setbeamercolor{institute}		{fg=white}
	\setbeamercolor{date}			{fg=white}
	\setbeamercolor{itemize item}		{fg=white}
	\setbeamercolor{itemize subitem}	{fg=white}
	\setbeamercolor{structure}		{fg=white}
	\setbeamercolor{line}			{bg=darkblue}
	\setbeamercolor{section in head/foot}	{bg=almostblack,fg=white}
	\setbeamercolor{separation line}	{bg=black}
	\definecolor{titlecontourtop}		{rgb}	{0.075,0.075,0.075}
	\definecolor{titlecontourbottom}	{rgb}	{0.000,0.000,0.000}
\fi

% block environment
%\setbeamercolor*{block body}	{fg=anthracite,bg=white}
%\setbeamercolor*{block title}	{fg=white,bg=darkblue}
%\setbeamerfont{block title}{size=\Huge,series=\bf}
%\setbeamercolor{alerted text}	{fg=white}
%\setbeamercolor{example text}{fg=taorange}

%\usesubitemizeitemtemplate{\tiny\raise1.5pt\hbox{\color{beamerstructure}$\blacktriangleright$}}
%\usesubsubitemizeitemtemplate{\tiny\raise1.5pt\hbox{\color{beamerstructure}$\bigstar$}}
%\listfiles
%\graphicspath{/images}

\beamertemplatenavigationsymbolsempty

\usetikzlibrary{backgrounds}
\pgfdeclarelayer{background}
\DeclareRobustCommand{\roundbox}[9]{\@ifnotempty{#8}{\vskip2.25ex}\tikz{\@ifnotempty{#8}{\pgftext[x=-#6-#6+1ex,y=.4ex]{\begin{beamercolorbox}[ht=2.25ex,dp=1ex,left,rounded=false,shadow=false,wd=#4]{}{\colorbox{#2}{\color{#1}{\large\textbf{#8}}}}\end{beamercolorbox}}}\begin{pgfonlayer}{background}\node[anchor=north,draw=#1,fill=#2,fill opacity=#3,text opacity=1,rounded corners=#5,inner sep=1ex,text width=#4-#6-2ex,line width=#6]{\begin{minipage}{\textwidth}\usebeamerfont{normal text}\begin{justify}#9\end{justify}\end{minipage}};\end{pgfonlayer}}}
\DeclareRobustCommand{\textcontour}[2]{\contour{#1}{\protecting{\begin{varwidth}[t]{\linewidth}#2\end{varwidth}}}}
\DeclareRobustCommand{\displayimage}[9]{\raisebox{\dimexpr.5\ht\strutbox-\totalheight-\partopsep-\topsep\relax}{\roundbox{#1}{#2}{1}{#3}{#4}{#5}{#6}{#7}{#8\\#9}}}

\contourlength{.5pt}

\setbeamertemplate{frametitle}{
		\begin{centering}
			\ifbeamer@style
				\usebeamerfont{frametitle}\usebeamercolor{frametitle}\insertframetitle
			\else
				\usebeamerfont{frametitle}\usebeamercolor{frametitle}\textcontour{black}{\insertframetitle}
			\fi
			\par\vskip-2ex
		\end{centering}
		}

\setbeamertemplate{headline}{
	\begin{beamercolorbox}{section in head/foot}
		\vskip2pt\vbox{
			\usebeamerfont{section in head/foot}\usebeamercolor[fg]{section in head/foot}
			%\contourlength{.2pt}\textcontour{darkgrey}{
				\beamer@xpos=0\relax
				\beamer@ypos=1\relax
				\hbox to \paperwidth{
					\hskip.3cm\setbox\beamer@sectionbox=\hbox{\kern1sp}
					\ht\beamer@sectionbox=1.875ex
					\dp\beamer@sectionbox=0.75ex
					\hskip-1.875ex plus-1fill\dohead\box\beamer@sectionbox\hfill\hskip.3cm}
			%}
			}
		\vskip1ex
	\end{beamercolorbox}
	\begin{beamercolorbox}[colsep=.2ex]{separation line}\end{beamercolorbox}
	}

\setbeamertemplate{footline}{
	\leavevmode
	\begin{beamercolorbox}[colsep=.2ex]{separation line}\end{beamercolorbox}
	\begin{beamercolorbox}[wd=\paperwidth]{section in head/foot}
		\usebeamerfont{section in head/foot}
		\begin{columns}
			\begin{column}{0.40\paperwidth}\raggedright\vfill\insertshortauthor\vskip.5ex{\bf\color{darkblue}\insertshorttitle}\vfill\end{column}
			\begin{column}{0.05\paperwidth}\centering\vfill{\bf\insertframenumber/\inserttotalframenumber}\vfill\end{column}
			\begin{column}{0.40\paperwidth}\raggedleft\vskip1ex
				\ifbeamer@style
					\includegraphics[height=16px,keepaspectratio]{dynamics-of-fluids-light.pdf}\hspace{6px}\includegraphics[height=16px,keepaspectratio]{uds-light.pdf}\hspace{6px}\includegraphics[height=16px,keepaspectratio]{frphysik-light.pdf}
				\else
					\includegraphics[height=16px,keepaspectratio]{dynamics-of-fluids-dark.pdf}\hspace{6px}\includegraphics[height=16px,keepaspectratio]{uds-dark.pdf}\hspace{6px}\includegraphics[height=16px,keepaspectratio]{frphysik-dark.pdf}
				\fi
				\vskip1ex\;
			\end{column}
		\end{columns}
	\end{beamercolorbox}
	}

\defbeamertemplate*{title page}{customized}[1][]{
	\thispagestyle{empty}
	\vskip-5.1ex
	\begin{beamercolorbox}[wd=\paperwidth,ht=.5\paperheight]{section in head/foot}
		\centering\usebeamerfont{title}\usebeamercolor[fg]{title}{\textcontour{titlecontourtop}{\centering\linespread{0.8}\Huge\inserttitle}}
		\vskip1ex
	\end{beamercolorbox}
	\nointerlineskip
	\begin{beamercolorbox}[wd=\paperwidth,colsep=.1ex]{separation line}\end{beamercolorbox}
	\centering{
		\usebeamerfont{author}\usebeamercolor[fg]{author}{\textcontour{titlecontourbottom}{\insertauthor}}\vskip.5ex
		\usebeamerfont{institute}\usebeamercolor[fg]{institute}{\textcontour{titlecontourbottom}{\insertinstitute}}
		\vfill
		\usebeamerfont{date}\usebeamercolor[fg]{date}{\textcontour{titlecontourbottom}{\insertdate}}
		}
	\vfill
	\begin{center}
		\begin{columns}
			\begin{column}{.3\paperwidth}
				\vskip1.5ex
				\begin{center}
					\ifbeamer@style
						\includegraphics[height=4ex,keepaspectratio]{dynamics-of-fluids-light.pdf}
					\else
						\includegraphics[height=4ex,keepaspectratio]{dynamics-of-fluids-dark.pdf}
					\fi
				\end{center}
			\end{column}
			\begin{column}{.3\paperwidth}
				\begin{center}
					\ifbeamer@style
						\includegraphics[height=4ex,keepaspectratio]{uds-light.pdf}
					\else
						\includegraphics[height=4ex,keepaspectratio]{uds-dark.pdf}
					\fi
				\end{center}
			\end{column}
			\begin{column}{.3\paperwidth}
				\begin{center}
					\ifbeamer@style
						\includegraphics[height=4ex,keepaspectratio]{frphysik-light.pdf}
					\else
						\includegraphics[height=4ex,keepaspectratio]{frphysik-dark.pdf}
					\fi
				\end{center}
			\end{column}
		\end{columns}
	\end{center}
}
\mode<all>
